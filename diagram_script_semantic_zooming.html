<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Semantic Transformation - Sequential Diagram</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: auto;
        }
        
        .container {
            min-width: 1400px;
            margin: 0 auto;
            position: relative;
        }
        
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(20, 20, 20, 0.9);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #333;
            z-index: 1000;
            min-width: 200px;
        }
        
        .controls h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #ffd43b;
        }
        
        .controls button {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 8px 15px;
            background: #1a1a1a;
            color: #fff;
            border: 1px solid #444;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .controls button:hover {
            background: #2a2a2a;
            border-color: #666;
        }
        
        .controls button.active {
            background: #3a3a3a;
            border-color: #888;
        }
        
        svg {
            width: 100%;
            height: 600px;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .node:hover {
            filter: brightness(1.2);
        }
        
        .node-rect {
            fill: #2a2a2a;
            stroke-width: 3;
            transition: all 0.3s ease;
            rx: 10;
        }
        
        .node-text {
            fill: #ffffff;
            font-size: 14px;
            font-weight: 500;
            pointer-events: none;
            text-anchor: middle;
        }
        
        .arrow {
            fill: none;
            stroke: #666;
            stroke-width: 3;
            marker-end: url(#arrowhead);
            opacity: 0.8;
        }
        
        /* Color coding for sections */
        .paragraph1 { stroke: #4a9eff; }
        .paragraph1 .node-rect { fill: #1a5fb4; }
        
        .paragraph2 { stroke: #46d160; }
        .paragraph2 .node-rect { fill: #2d8a3e; }
        
        .paragraph3 { stroke: #ff6b6b; }
        .paragraph3 .node-rect { fill: #c92a2a; }
        
        /* Text display */
        .text-display {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 250px;
            background: rgba(20, 20, 20, 0.95);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #333;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            scroll-behavior: smooth;
        }
        
        .full-text {
            line-height: 1.8;
        }
        
        .full-text h4 {
            color: #ffd43b;
            margin: 0 0 15px 0;
            font-size: 18px;
            position: sticky;
            top: -25px;
            background: rgba(20, 20, 20, 0.95);
            padding: 10px 0;
        }
        
        .full-text p {
            margin: 0 0 15px 0;
            color: #e0e0e0;
            transition: all 0.3s ease;
        }
        
        /* Text highlights */
        .text-segment {
            padding: 2px 4px;
            border-radius: 3px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .text-segment:hover {
            filter: brightness(1.2);
        }
        
        .segment-p1-1, .segment-p1-2 { background: rgba(74, 158, 255, 0.2); }
        .segment-p1-3, .segment-p1-4 { background: rgba(74, 158, 255, 0.2); }
        .segment-p2-1, .segment-p2-2, .segment-p2-3 { background: rgba(70, 209, 96, 0.2); }
        .segment-p3-1, .segment-p3-2, .segment-p3-3, .segment-p3-4 { background: rgba(255, 107, 107, 0.2); }
        
        /* Active highlight */
        .text-segment.active {
            background: rgba(255, 212, 59, 0.4) !important;
            box-shadow: 0 0 10px rgba(255, 212, 59, 0.6);
            padding: 4px 8px;
            font-weight: 600;
        }
        
        .progress-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(20, 20, 20, 0.9);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #333;
            font-size: 14px;
            color: #ffd43b;
        }
        
        .current-node {
            filter: drop-shadow(0 0 20px rgba(255, 212, 59, 0.6));
        }
        
        /* Dimmed text when specific segment is highlighted */
        .full-text.highlighting p {
            opacity: 0.4;
        }
        
        .full-text.highlighting .text-segment.active {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-indicator">
            <span id="currentStep">Navigate the flow →</span>
        </div>
        
        <div class="controls">
            <h3>View Controls</h3>
            <button id="toggleFullText">Show Full Script</button>
            <button id="highlightP1" class="active">Paragraph 1 (Blue)</button>
            <button id="highlightP2" class="active">Paragraph 2 (Green)</button>
            <button id="highlightP3" class="active">Paragraph 3 (Red)</button>
            <button id="resetView">Reset View</button>
            <button id="exportMermaid">Export to Mermaid</button>
        </div>
        
        <svg id="diagram">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                </marker>
            </defs>
        </svg>
        
        <div id="fullTextDisplay" class="text-display full-text">
            <h4>Full Script - Click nodes to highlight relevant text</h4>
            
            <p id="paragraph1">
                <span class="text-segment segment-p1-1" data-node="p1-1">The current discourse around AI often frames it as either a sophisticated tool for specific tasks or an intelligent collaborator.</span> 
                <span class="text-segment segment-p1-2" data-node="p1-2">While true, this perspective overlooks a more profound capability: AI, particularly Large Language Models, can function as a powerful semantic transformation layer for information.</span> 
                <span class="text-segment segment-p1-3" data-node="p1-3">Instead of just processing data or generating new content based on prompts, it can fundamentally alter the representation of existing information, making it more accessible, relevant, and useful for human cognition in diverse contexts.</span> 
                <span class="text-segment segment-p1-4" data-node="p1-4">This isn't just about automation; it's about re-shaping the very fabric of how data is presented to us.</span>
            </p>
            
            <p id="paragraph2">
                <span class="text-segment segment-p2-1" data-node="p2-1">This transformative power stems from AI's ability to understand and manipulate information at various levels of abstraction, akin to climbing a "ladder of abstraction."</span> 
                <span>Imagine a dense legal document or a complex dataset.</span> 
                <span class="text-segment segment-p2-2" data-node="p2-2">AI can digest this raw input and then, on demand, re-present it as a concise summary, a set of key bullet points, a visual trend, or even a comparison tailored to specific criteria.</span> 
                <span class="text-segment segment-p2-3" data-node="p2-3">The core information remains, but its form is dynamically adapted to suit the user's immediate need or cognitive load, moving fluidly between granular detail and high-level overviews.</span>
            </p>
            
            <p id="paragraph3">
                <span class="text-segment segment-p3-1" data-node="p3-1">The ultimate impact of viewing AI as a data transformation layer is a fundamental shift in our interaction with information.</span> 
                <span class="text-segment segment-p3-2" data-node="p3-2">It moves beyond simply offloading tasks to AI and instead empowers us to navigate and comprehend complex information landscapes with unprecedented ease.</span> 
                <span class="text-segment segment-p3-3" data-node="p3-3">By allowing us to choose the "zoom level" or "angle" from which we view data,</span> 
                <span class="text-segment segment-p3-4" data-node="p3-4">AI augments our understanding, facilitates quicker insights, and enables more informed decision-making, effectively turning information overload into actionable intelligence.</span>
            </p>
        </div>
    </div>

    <script>
        // Sequential node data
        const nodes = [
            // Paragraph 1 - Blue
            {
                id: 'p1-1',
                label: 'Current AI\nDiscourse',
                x: 100,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph1',
                text: 'AI is often framed as either a sophisticated tool for specific tasks or an intelligent collaborator.',
                step: 1
            },
            {
                id: 'p1-2',
                label: 'Overlooked\nCapability',
                x: 280,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph1',
                text: 'This perspective overlooks AI\'s capability to function as a powerful semantic transformation layer.',
                step: 2
            },
            {
                id: 'p1-3',
                label: 'Semantic\nTransformation',
                x: 460,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph1',
                text: 'AI can fundamentally alter the representation of existing information for diverse contexts.',
                step: 3
            },
            {
                id: 'p1-4',
                label: 'Reshaping\nInformation',
                x: 640,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph1',
                text: 'This isn\'t about automation; it\'s about re-shaping how data is presented to us.',
                step: 4
            },
            
            // Paragraph 2 - Green
            {
                id: 'p2-1',
                label: 'Ladder of\nAbstraction',
                x: 820,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph2',
                text: 'AI can understand and manipulate information at various levels of abstraction.',
                step: 5
            },
            {
                id: 'p2-2',
                label: 'Multiple\nFormats',
                x: 1000,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph2',
                text: 'AI can re-present information as summaries, bullet points, visual trends, or tailored comparisons.',
                step: 6
            },
            {
                id: 'p2-3',
                label: 'Dynamic\nAdaptation',
                x: 1180,
                y: 300,
                width: 120,
                height: 60,
                class: 'paragraph2',
                text: 'Information form is dynamically adapted to suit user\'s immediate need or cognitive load.',
                step: 7
            },
            
            // Paragraph 3 - Red
            {
                id: 'p3-1',
                label: 'Fundamental\nShift',
                x: 460,
                y: 450,
                width: 120,
                height: 60,
                class: 'paragraph3',
                text: 'AI enables a fundamental shift in our interaction with information.',
                step: 8
            },
            {
                id: 'p3-2',
                label: 'Empowered\nNavigation',
                x: 640,
                y: 450,
                width: 120,
                height: 60,
                class: 'paragraph3',
                text: 'Empowers us to navigate complex information landscapes with unprecedented ease.',
                step: 9
            },
            {
                id: 'p3-3',
                label: 'Zoom Level\n& Angle',
                x: 820,
                y: 450,
                width: 120,
                height: 60,
                class: 'paragraph3',
                text: 'AI allows us to choose the "zoom level" or "angle" from which we view data.',
                step: 10
            },
            {
                id: 'p3-4',
                label: 'Actionable\nIntelligence',
                x: 1000,
                y: 450,
                width: 120,
                height: 60,
                class: 'paragraph3',
                text: 'Turns information overload into actionable intelligence through augmented understanding.',
                step: 11
            }
        ];
        
        // Arrows between nodes
        const arrows = [
            { from: 'p1-1', to: 'p1-2' },
            { from: 'p1-2', to: 'p1-3' },
            { from: 'p1-3', to: 'p1-4' },
            { from: 'p1-4', to: 'p2-1' },
            { from: 'p2-1', to: 'p2-2' },
            { from: 'p2-2', to: 'p2-3' },
            { from: 'p2-3', to: 'p3-1', curved: true },
            { from: 'p3-1', to: 'p3-2' },
            { from: 'p3-2', to: 'p3-3' },
            { from: 'p3-3', to: 'p3-4' }
        ];
        
        // Initialize SVG
        const svg = document.getElementById('diagram');
        
        // Create arrows
        arrows.forEach(arrow => {
            const fromNode = nodes.find(n => n.id === arrow.from);
            const toNode = nodes.find(n => n.id === arrow.to);
            
            if (arrow.curved) {
                // Curved arrow for transition between paragraphs
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const midX = (fromNode.x + fromNode.width + toNode.x) / 2;
                const midY = (fromNode.y + toNode.y) / 2 + 50;
                
                const d = `M ${fromNode.x + fromNode.width} ${fromNode.y + fromNode.height/2} 
                          Q ${midX} ${midY} ${toNode.x} ${toNode.y + toNode.height/2}`;
                
                path.setAttribute('d', d);
                path.setAttribute('class', 'arrow');
                svg.appendChild(path);
            } else {
                // Straight arrow
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('class', 'arrow');
                line.setAttribute('x1', fromNode.x + fromNode.width);
                line.setAttribute('y1', fromNode.y + fromNode.height/2);
                line.setAttribute('x2', toNode.x);
                line.setAttribute('y2', toNode.y + toNode.height/2);
                svg.appendChild(line);
            }
        });
        
        // Create nodes
        nodes.forEach(node => {
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            g.setAttribute('class', `node ${node.class}`);
            g.setAttribute('data-id', node.id);
            g.setAttribute('data-step', node.step);
            
            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            rect.setAttribute('class', 'node-rect');
            rect.setAttribute('x', node.x);
            rect.setAttribute('y', node.y);
            rect.setAttribute('width', node.width);
            rect.setAttribute('height', node.height);
            
            g.appendChild(rect);
            
            // Multi-line text
            const lines = node.label.split('\n');
            lines.forEach((line, i) => {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('class', 'node-text');
                text.setAttribute('x', node.x + node.width/2);
                text.setAttribute('y', node.y + node.height/2 + (i - (lines.length - 1) / 2) * 16);
                text.textContent = line;
                g.appendChild(text);
            });
            
            // Click handler
            g.addEventListener('click', () => handleNodeClick(node));
            
            svg.appendChild(g);
        });
        
        // State management
        let fullTextVisible = false;
        let currentStep = 0;
        let activeSegment = null;
        
        const fullTextDisplay = document.getElementById('fullTextDisplay');
        
        // Handle node clicks
        function handleNodeClick(node) {
            currentStep = node.step;
            updateProgress();
            
            // Clear previous highlights
            document.querySelectorAll('.text-segment').forEach(segment => {
                segment.classList.remove('active');
            });
            
            // Highlight corresponding text if full text is visible
            if (fullTextVisible) {
                const segment = document.querySelector(`[data-node="${node.id}"]`);
                if (segment) {
                    segment.classList.add('active');
                    activeSegment = segment;
                    
                    // Add highlighting class to container
                    fullTextDisplay.classList.add('highlighting');
                    
                    // Scroll to highlighted segment
                    segment.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }
        
        // Update progress indicator
        function updateProgress() {
            if (currentStep > 0) {
                const node = nodes.find(n => n.step === currentStep);
                document.getElementById('currentStep').textContent = `Step ${currentStep}/11: ${node.label.replace(/\n/g, ' ')}`;
                
                // Highlight current node
                document.querySelectorAll('.node').forEach(n => n.classList.remove('current-node'));
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('current-node');
            }
        }
        
        // Text segment click handlers
        document.querySelectorAll('.text-segment').forEach(segment => {
            segment.addEventListener('click', () => {
                const nodeId = segment.getAttribute('data-node');
                const node = nodes.find(n => n.id === nodeId);
                if (node) {
                    handleNodeClick(node);
                }
            });
        });
        
        // Control handlers
        document.getElementById('toggleFullText').addEventListener('click', function() {
            fullTextVisible = !fullTextVisible;
            this.textContent = fullTextVisible ? 'Hide Full Script' : 'Show Full Script';
            this.classList.toggle('active', fullTextVisible);
            fullTextDisplay.style.display = fullTextVisible ? 'block' : 'none';
            
            if (!fullTextVisible) {
                fullTextDisplay.classList.remove('highlighting');
                document.querySelectorAll('.text-segment').forEach(segment => {
                    segment.classList.remove('active');
                });
            }
        });
        
        // Paragraph toggles
        ['P1', 'P2', 'P3'].forEach((p, i) => {
            document.getElementById(`highlight${p}`).addEventListener('click', function() {
                this.classList.toggle('active');
                const elements = document.querySelectorAll(`.paragraph${i + 1}`);
                elements.forEach(el => {
                    el.style.opacity = this.classList.contains('active') ? '1' : '0.2';
                });
            });
        });
        
        // Reset view
        document.getElementById('resetView').addEventListener('click', () => {
            document.querySelectorAll('.node').forEach(el => {
                el.style.opacity = '1';
                el.classList.remove('current-node');
            });
            document.querySelectorAll('.arrow').forEach(el => {
                el.style.opacity = '0.8';
            });
            document.querySelectorAll('.controls button').forEach(btn => {
                if (!['toggleFullText', 'resetView', 'exportMermaid'].includes(btn.id)) {
                    btn.classList.add('active');
                }
            });
            
            // Clear text highlights
            fullTextDisplay.classList.remove('highlighting');
            document.querySelectorAll('.text-segment').forEach(segment => {
                segment.classList.remove('active');
            });
            
            currentStep = 0;
            document.getElementById('currentStep').textContent = 'Navigate the flow →';
        });
        
        // Export to Mermaid button
        document.getElementById('exportMermaid').addEventListener('click', function() {
            let mermaidCode = 'flowchart LR\n';
            
            // Define nodes with proper escaping
            nodes.forEach(node => {
                const label = node.label.replace(/\n/g, '<br/>');
                mermaidCode += `    ${node.id}["${label}"]\n`;
            });
            
            mermaidCode += '\n';
            
            // Define connections
            arrows.forEach((arrow, index) => {
                if (arrow.curved) {
                    mermaidCode += `    ${arrow.from} -.-> ${arrow.to}\n`;
                } else {
                    mermaidCode += `    ${arrow.from} --> ${arrow.to}\n`;
                }
            });
            
            mermaidCode += '\n';
            
            // Add styling
            mermaidCode += '    %% Styling\n';
            mermaidCode += '    classDef paragraph1 fill:#1a5fb4,stroke:#4a9eff,stroke-width:3px,color:#fff\n';
            mermaidCode += '    classDef paragraph2 fill:#2d8a3e,stroke:#46d160,stroke-width:3px,color:#fff\n';
            mermaidCode += '    classDef paragraph3 fill:#c92a2a,stroke:#ff6b6b,stroke-width:3px,color:#fff\n';
            
            mermaidCode += '\n';
            
            // Apply classes
            const p1Nodes = nodes.filter(n => n.class === 'paragraph1').map(n => n.id).join(',');
            const p2Nodes = nodes.filter(n => n.class === 'paragraph2').map(n => n.id).join(',');
            const p3Nodes = nodes.filter(n => n.class === 'paragraph3').map(n => n.id).join(',');
            
            if (p1Nodes) mermaidCode += `    class ${p1Nodes} paragraph1\n`;
            if (p2Nodes) mermaidCode += `    class ${p2Nodes} paragraph2\n`;
            if (p3Nodes) mermaidCode += `    class ${p3Nodes} paragraph3\n`;
            
            // Copy to clipboard using modern API if available
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(mermaidCode).then(() => {
                    // Visual feedback
                    this.textContent = 'Copied to Clipboard!';
                    this.style.background = '#2d8a3e';
                    
                    setTimeout(() => {
                        this.textContent = 'Export to Mermaid';
                        this.style.background = '';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy:', err);
                    alert('Failed to copy to clipboard. Check console for the code.');
                });
            } else {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = mermaidCode;
                textarea.style.position = 'fixed';
                textarea.style.top = '0';
                textarea.style.left = '0';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    document.execCommand('copy');
                    this.textContent = 'Copied to Clipboard!';
                    this.style.background = '#2d8a3e';
                    
                    setTimeout(() => {
                        this.textContent = 'Export to Mermaid';
                        this.style.background = '';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                    alert('Failed to copy to clipboard. Check console for the code.');
                }
                
                document.body.removeChild(textarea);
            }
            
            // Always log to console for easy access
            console.log('Mermaid Diagram Code:');
            console.log(mermaidCode);
        });
        
        // Click outside text to remove highlighting
        fullTextDisplay.addEventListener('click', (e) => {
            if (e.target === fullTextDisplay || e.target.tagName === 'P') {
                fullTextDisplay.classList.remove('highlighting');
                document.querySelectorAll('.text-segment').forEach(segment => {
                    segment.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>